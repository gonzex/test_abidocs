<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="The Abinit group">
    <link rel="canonical" href="http://www.abinit.org/user-guide/help_mrgddb/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Mrgddb - abinit</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <link href="../../css/codehilite.css" rel="stylesheet">
    <link href="../../css/extra.css" rel="stylesheet">
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <!-- <script src="../../js/somelib.js"></script> -->

    <!-- Jquery from Google CDN 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    -->

    <!-- Bootstrap http://getbootstrap.com/getting-started/ -->
    <!-- Latest compiled and minified CSS 

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    -->
    <!-- Optional theme

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    -->
    <!-- Latest compiled and minified JavaScript

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    -->

    <!-- MathJax support -->
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script> 
    <!--
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG">
    </script> 
    -->

    <!--
    Configure MathJax to produce automatic equation numbers
    http://docs.mathjax.org/en/latest/tex.html
    -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
          TeX: {
              equationNumbers: { autoNumber: "all" },
              extensions: ["AMSmath.js"],
              Macros: {
                  rr: "{\\bf r}",
                  GG: "{\\bf G}",
                  kk: "{\\bf k}",
                  qq: "{\\bf q}"
              }
          }
      });
    </script>

    <!-- See http://docs.mathjax.org/en/latest/start.html 
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js", "MathMenu.js", "MathZoom.js"],
        jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    -->


    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
        ];

    </script>
    <script src="../../js/base.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.8/ace.js"></script>
      <script src="../../extra_javascript/abidocs.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../help_optic/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../help_optic/" class="btn btn-xs btn-link">
        Optic
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../help_abinit/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../help_abinit/" class="btn btn-xs btn-link">
        Abinit
      </a>
    </div>
    
  </div>

    

    <div class="toc">
<ul></ul>
</div>
<p>The user is advised to be familiar with the main <a class="wikilink" href="../../help_file/">help_file</a> before reading
the present file. It is important to read also the <a href="../help_anaddb.html"><strong>Analysis of Derivative
DataBase code (Anaddb) help file</strong></a> to complement the
present reading.</p>
<p>The mrgddb code has the purpose to merge "transfer" DDBs
(that were generated from the ABINIT code) to make a complete DDB
that can be exploited by the Anaddb code.</p>
<p>The input is very simple, and could be given directly at the screen,
or more conveniently, piped from a file.
The user should provide first the name of the new (output) DDB.
He/she should then give a short description (one line) of this new DDB
that will be created. This line will be printed at the beginning
of the DDB.</p>
<p>The user should then give the number of DDBs that will be merged, then
the whole set of filenames for the DDBs to be merged, one on each line.</p>
<hr />
<p>Is a merging code really useful ?</p>
<p>The ABINIT code in its present
version is only able to produce results for one q wavevector
for each dataset.  A database for more than one q point can thus be created
using MRGDDB. Also, it is useful to be able to merge different DDBs
if they are produced independently on different machines.</p>
<hr />
<p>How does the merging code work ?</p>
<p>The DDBs are made of two parts. The first
part is a list of the parameters that were used to make the DDB,
and the second part lists the 2DTEs and 3DTEs.</p>
<p>The merging code will check if the following variables are exactly
the same in the different input DDB : natom,
<a class="wikilink" href="../../input_variables/basic/#ntypat">ntypat</a>, <a class="wikilink" href="../../input_variables/basic/#nband">nband</a>, <a class="wikilink" href="../../input_variables/basic/#acell">acell</a>, <a class="wikilink" href="../../input_variables/rlx/#amu">amu</a>, <a class="wikilink" href="../../input_variables/basic/#ecut">ecut</a>, <a class="wikilink" href="../../input_variables/basic/#ixc">ixc</a>, lloc, <a class="wikilink" href="../../input_variables/gstate/#ngfft">ngfft</a>, <a class="wikilink" href="../../input_variables/gstate/#occ">occ</a>, <a class="wikilink" href="../../input_variables/basic/#rprim">rprim</a>,
<a class="wikilink" href="../../input_variables/basic/#typat">typat</a>, <a class="wikilink" href="../../input_variables/basic/#xred">xred</a>, zion.</p>
<p>For <a class="wikilink" href="../../input_variables/basic/#nband">nband</a> and <a class="wikilink" href="../../input_variables/gstate/#occ">occ</a>, the value of <a class="wikilink" href="../../input_variables/basic/#occopt">occopt</a> is taken into account
(see abinit help file). If possible, MRGDDB will produce
a DDB with occopt=0.</p>
<p>In case of two different data sets, the code will print an error message and stop.
The code cannot merge two DDB that have been generated
using two different geometries
or convergence (<a class="wikilink" href="../../input_variables/basic/#ecut">ecut</a>, ...) parameters.</p>
<p>The only exception is connected to the possibility to use Time-reversal
symmetry to decrease the number of special k points when the
wavevector of the perturbation is Gamma. In that case, the code
will merge the DDBs and put the largest set of k-points inside
the new DDB.</p>
<p>MRGDDB will copy the latest date of the transfer or current
DDB and copy it in the new DDB.</p>
<p>It will also take the less accurate tolwfr and copy it in the new DDB.</p>
<p>This ends the first part of the action of MRGDDB, namely
to compare the information of the two different DDB.</p>
<p>When the checking is done, MRGDDB will check the content
of the different data blocks and constitute the new DDB by
copying sequentially the non-identical blocks and merging the
identical blocks. In case two elements are identical, MRGDDB
copies the value of the transfer DDB.
(This latter property makes it easy to get rid of old, erroneous data
and put new, correct data in its place)</p>
<p>Finally, the summary of the block content of the DDB is provided
at the end of the DDB file.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../help_optic/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../help_optic/" class="btn btn-xs btn-link">
        Optic
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../help_abinit/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../help_abinit/" class="btn btn-xs btn-link">
        Abinit
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
<hr>

    <center>Abinit version 8.5.4</center>


    <center>Copyright &copy; 2017 The Abinit Group</center>


<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
</footer>

</body>
</html>