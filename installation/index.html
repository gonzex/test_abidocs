<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="The Abinit group">
        <link rel="canonical" href="http://www.abinit.org/installation/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Installation - abinit</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">
        <link href="../css/codehilite.css" rel="stylesheet">
    
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
    <!-- <script src="../js/somelib.js"></script> -->

    <!--
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    -->

    <!--
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script> $( function() {$( "#abinit-tabs" ).tabs();} ); </script>
    -->

    
 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">abinit</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Start <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="..">Introduction</a>
</li>
                            
<li class="active">
    <a href="./">Installation</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Topics</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../topics/crystal/">Crystalline Structure</a>
</li>
            
<li >
    <a href="../topics/kpoints/">K-points</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../user-guide/help_what_ABINIT_does/">Overview</a>
</li>
                            
<li >
    <a href="../user-guide/help_abinit/">Abinit</a>
</li>
                            
<li >
    <a href="../user-guide/help_mrgddb/">Mrgddb</a>
</li>
                            
<li >
    <a href="../user-guide/help_optic/">Optic</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Input Variables <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Abinit</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../input_variables/varlist_abinit/">All Variables</a>
</li>
            
<li >
    <a href="../input_variables/varbas/">Basic</a>
</li>
            
<li >
    <a href="../input_variables/varbse/">Bethe-Salpeter</a>
</li>
            
<li >
    <a href="../input_variables/vardev/">Developers</a>
</li>
            
<li >
    <a href="../input_variables/vardmft/">DMFT</a>
</li>
            
<li >
    <a href="../input_variables/vareph/">Electron-Phonon</a>
</li>
            
<li >
    <a href="../input_variables/varff/">Varff</a>
</li>
            
<li >
    <a href="../input_variables/varfil/">File-handling</a>
</li>
            
<li >
    <a href="../input_variables/vargeo/">Geometry</a>
</li>
            
<li >
    <a href="../input_variables/vargs/">Ground-State</a>
</li>
            
<li >
    <a href="../input_variables/vargw/">GW</a>
</li>
            
<li >
    <a href="../input_variables/varint/">Internal</a>
</li>
            
<li >
    <a href="../input_variables/varpar/">Parallelism</a>
</li>
            
<li >
    <a href="../input_variables/varpaw/">PAW</a>
</li>
            
<li >
    <a href="../input_variables/varrf/">RF</a>
</li>
            
<li >
    <a href="../input_variables/varrlx/">Relaxation</a>
</li>
            
<li >
    <a href="../input_variables/varvdw/">VdW</a>
</li>
            
<li >
    <a href="../input_variables/varw90/">Wannier90</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../tutorials/welcome/">Overview</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Base Tutorials</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../tutorials/base1/">Base1</a>
</li>
            
<li >
    <a href="../tutorials/base2/">Base2</a>
</li>
            
<li >
    <a href="../tutorials/base3/">Base3</a>
</li>
            
<li >
    <a href="../tutorials/base4/">Base4</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">DFPT</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../tutorials/rf1/">RF1</a>
</li>
            
<li >
    <a href="../tutorials/rf2/">RF2</a>
</li>
            
<li >
    <a href="../tutorials/elastic/">Elastic</a>
</li>
            
<li >
    <a href="../tutorials/eph/">EPH</a>
</li>
    </ul>
  </li>
                            
<li >
    <a href="../tutorials/dmft/">DMFT</a>
</li>
                            
  <li class="dropdown-submenu">
    <a href="#">Many-Body</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../tutorials/gw1/">GW1</a>
</li>
            
<li >
    <a href="../tutorials/gw2/">GW2</a>
</li>
            
<li >
    <a href="../tutorials/bse/">Bethe-Salpeter</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Parallelism</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../tutorials/basepar/">Base</a>
</li>
            
<li >
    <a href="../tutorials/paral_mbt/">Many-Body</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Theory <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../theory/theory_mbt/">MBPT</a>
</li>
                            
<li >
    <a href="../theory/additional_material/">Additional Material</a>
</li>
                            
<li >
    <a href="../bibliography/">Bibliography</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../about/release-notes/">Release Notes</a>
</li>
                            
<li >
    <a href="../about/contributing/">Contributing</a>
</li>
                            
<li >
    <a href="../about/license/">License</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../topics/crystal/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/abinit/abinit/">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#installation-notes-for-abinit-v84">Installation notes for ABINIT v8.4</a></li>
            <li><a href="#046-short-how-to">0. Short how to ...</a></li>
            <li><a href="#146-how-to-get-a-version-of-abinit">1. How to get a version of ABINIT?</a></li>
            <li><a href="#246-how-to-make-the-executables-how-to-compile-the-executables">2. How to make the executables? (=How to compile the executables?)</a></li>
            <li><a href="#346-how-to-make-the-internal-tests">3. How to make the internal tests?</a></li>
            <li><a href="#546-how-to-make-the-other-tests">5. How to make the other tests?</a></li>
            <li><a href="#646-things-that-are-not-in-the-installation-packages">6. Things that are NOT in the installation packages.</a></li>
            <li><a href="#746-for-developers-how-to-modify-the-code">7. For developers: how to modify the code?</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<hr />
<h1 id="installation-notes-for-abinit-v84">Installation notes for ABINIT v8.4<a class="headerlink" href="#installation-notes-for-abinit-v84" title="Permanent link">&para;</a></h1>
<hr />
<p>This file provides a description of the operations needed to install the
ABINIT package, to generate the executable and to make the tests. It provides
also the description of simple modifications of the package, for developers.</p>
<p>See a recent version of the <a href="../../users/new_user_guide.html">new user&rsquo;s guide</a>,
for an introduction to the abinit package. See a recent version of the <a href="../../users/abinit_help.html">abinit
help</a> file for learning how to use the code. Both
of them can be found either on the Web, or in the doc subdirectory of the
package.</p>
<p>Any comment or suggestion to improve the procedure will be welcome! Simply
contact the ABINIT group (http://forum.abinit.org/).</p>
<div class="toc">
<ul>
<li><a href="#installation-notes-for-abinit-v84">Installation notes for ABINIT v8.4</a><ul>
<li><a href="#046-short-how-to">0. Short how to &hellip;</a></li>
<li><a href="#146-how-to-get-a-version-of-abinit">1. How to get a version of ABINIT?</a><ul>
<li><a href="#1a-expert-user-of-developer">1.A. Expert user of developer</a></li>
<li><a href="#1b-normal-user">1.B. Normal user</a></li>
</ul>
</li>
<li><a href="#246-how-to-make-the-executables-how-to-compile-the-executables">2. How to make the executables? (=How to compile the executables?)</a></li>
<li><a href="#346-how-to-make-the-internal-tests">3. How to make the internal tests?</a></li>
<li><a href="#546-how-to-make-the-other-tests">5. How to make the other tests?</a></li>
<li><a href="#646-things-that-are-not-in-the-installation-packages">6. Things that are NOT in the installation packages.</a></li>
<li><a href="#746-for-developers-how-to-modify-the-code">7. For developers: how to modify the code?</a><ul>
<li><a href="#71-to-modify-a-file-arguments-unchanged">7.1. To modify a file (arguments unchanged).</a></li>
<li><a href="#72-to-modify-a-file-arguments-changed">7.2. To modify a file (arguments changed).</a></li>
<li><a href="#73-to-add-a-fortran-file">7.3. To add a Fortran file.</a></li>
<li><a href="#74-to-generate-the-source-package">7.4. To generate the source package.</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr />
<h2 id="046-short-how-to">0. Short how to &hellip;<a class="headerlink" href="#046-short-how-to" title="Permanent link">&para;</a></h2>
<p>For the vast majority of people willing to use ABINIT (Unix/Linux, not developers, but users), 
here follows a short list of instructions needed to install it:</p>
<ol>
<li>Download, gunzip and untar the <a href="http://www.abinit.org/downloads/abinit-packages">latest version of the ABINIT package</a> (abinit-x.y.z.tar.gz) from the abinit Web site, then change the current directory to the top of the directory that was created. If you do not know what all this means, go to <strong>1. How to get a version of ABINIT? (Section 1B Normal users)</strong></li>
<li>Issue configure or ./configure (or first create a tmp directory, then cd tmp, then ../configure)</li>
<li>Issue make (or make mj4 , or make multi multi_nprocs=n for using &ldquo;n&rdquo; processors on a SMP machine where you have to replace &ldquo;n&rdquo; by its value) </li>
<li>Issue (optionally) &ldquo;make install&rdquo;</li>
</ol>
<p>Well, it might also be that information on the Fortran compiler is needed, in
which case something like:</p>
<div class="codehilite"><pre><span></span>     $ ./configure <span class="nv">FC</span><span class="o">=</span>your_F90_compiler 
</pre></div>


<p>instead of the bare &ldquo;configure&rdquo;, might work, where &ldquo;your_F90_compiler&rdquo; has to
be replaced by the location of your F90 compiler, such as
/usr/local/gcc472/bin/gfortran.</p>
<p>If you succeeded to download, gunzip and untar the ABINIT package, but failed
with the next steps, please go to <strong>2. How to make the executables?</strong></p>
<p>If you succeeded to make the executables, but would like to check whether
ABINIT has been installed correctly, please go to <strong>3. How to make the
internal tests?</strong> and the following sections.</p>
<p>If you want to have a much better handling on ABINIT than normal users, or if
you download ABINIT from Gitlab or GitHub, then go to <strong>1. How to get a
version of ABINIT? (Section 1A Expert users of developer)</strong>.</p>
<p>To build the executables you will need at least 400 MBytes of free disk space.
Running all tests will require more than 2.5 GBytes.</p>
<hr />
<h2 id="146-how-to-get-a-version-of-abinit">1. How to get a version of ABINIT?<a class="headerlink" href="#146-how-to-get-a-version-of-abinit" title="Permanent link">&para;</a></h2>
<p>We will distinguish two cases:</p>
<ul>
<li>1.A. Expert user or developer. You have a F90 compiler under UNIX/Linux or MacOS X, as well as (free) <strong>software applications like git, automake, autoconf, libtool, perl, python, and you want to have a full handle</strong> on the package (compilation, modification of files, writing of scripts &hellip; this is the preferred case for developers). This is also needed if you download ABINIT from the primary ABINIT GitLab repository or its GitHub mirror. We will sometimes refer to this case as the &ldquo;autotools working mode&rdquo;.</li>
<li>1.B. Normal user. You have a F90 compiler under UNIX/Linux or MacOS X and you want <strong>simply to compile the source code</strong>, and, from time to time, <strong>modify and/or add a new file</strong> (this is the case of most users, system managers, and also occasional developers). We will sometimes refer to this case as being &ldquo;without autotools&rdquo;.</li>
</ul>
<p>You should read only the appropriate section (you can safely ignore the other
one &hellip;).</p>
<h3 id="1a-expert-user-of-developer">1.A. Expert user of developer<a class="headerlink" href="#1a-expert-user-of-developer" title="Permanent link">&para;</a></h3>
<p>You have a F90 compiler under UNIX/Linux or MacOS X, as well as (free)
software like git, automake, autoconf, libtool, perl, python, and you want to
have a full handle on the package (compilation, modification of files, writing
of scripts). This is the preferred case for developers&hellip; We will sometimes
refer to this case as the &ldquo;autotools development mode&rdquo;.</p>
<p>If you do not have these tools, and would like to have them, please consult
your local computer guru, and the following pages:</p>
<ul>
<li><a href="http://dev.abinit.org/doc/for-new-developers/how-to-contribute">An overview of ABINIT development</a></li>
<li><a href="http://dev.abinit.org/doc/for-new-developers/abinit-5-in-10-steps">10 steps to hike ABINIT</a></li>
<li><a href="http://dev.abinit.org/environment">ABINIT environment</a></li>
</ul>
<p>If you want to develop on a regular basis, please have a Git(lab) access
created for you by contacting Jean-Michel Beuken, as described in these pages.
If it is only very occasional, you might as well rely on the <a href="https://github.com/abinit">ABINIT Github Web site</a>.</p>
<p>It is strongly advised to subscribe to the <a href="http://forum.abinit.org/">ABINIT
forum</a> if you want to be able to get the latest
information concerning the autotools development mode.</p>
<dl>
<dt>After having installed git, and obtained a branch on the ABINIT worldwide</dt>
<dt>repository, create an automomous copy of the source code, on top of which you</dt>
<dt>have to make your development. This is explained in the ABINIT wiki [git(lab)</dt>
<dd>ABINIT
specificities](https://wiki.abinit.org/doku.php?id=developers:specificities_git_abinit)</dd>
</dl>
<p>For your branches on the ABINIT worldwide repository, you will have the
permission not only to clone/fetch/pull, but also to commit/push your
modifications. You might alternatively download other branches of the
archives, but you will not be able to commit in these branches. So, do not
start to modify these, you will not be able to include them afterwards in the
archive.</p>
<p>Working with <code>git clone</code> creates a local archive for your daily work, this
archive being linked to the main ABINIT archive. This very efficient technique
is recommended, as it makes you more independent for the management of your
work (you will be able to create new branches). One big advantage of this
technique is that people working with a laptop can develop and commit safely
without a network connection.</p>
<p>Now, cd to the newly created abinit directory, and issue :</p>
<div class="codehilite"><pre><span></span>    $ ./config/scripts/makemake
</pre></div>


<p>This command initializes a whole set of files and scripts, needed for the
autotools, as well as for the global work on ABINIT sources. This
initialization might take up to two minutes.</p>
<p>After this initialisation, you can proceed to the generation of the
executables, as described in section 2.</p>
<h3 id="1b-normal-user">1.B. Normal user<a class="headerlink" href="#1b-normal-user" title="Permanent link">&para;</a></h3>
<p>You have a F90 compiler under UNIX/Linux or MacOS X and you want simply to
<strong>compile the source files</strong>, and, from time to time, <strong>modify and/or add a
new file</strong>. This is the case of most users, system managers, and also many
developers. If you want to modify and/or add a new file, please consult the
section 7. For developers : how to modify the code? after reading the present
section. In what follows, <em>x.y.z</em> represents the ABINIT version.</p>
<p>In order to get the ABINIT package, you have first to download the file
<strong>abinit-<em>x.y.z</em>.tar.gz</strong> from the ABINIT Web site, see <a href="http://www.abinit.org/downloads/abinit-packages">the following
page</a> then issue :</p>
<div class="codehilite"><pre><span></span>    gunzip **abinit-_x.y.z_.tar.gz** <span class="p">|</span> tar -xvf -
</pre></div>


<p>That&rsquo;s it.</p>
<p>The <strong>abinit-<em>x.y.z</em>.tar.gz</strong> gzipped tar file contains all the needed files, including:</p>
<ul>
<li>the sources of the abinit code (also, the files needed for generating the blas and lapack libraries), in the directories &ldquo;src&rdquo; and &ldquo;lib&rdquo;;</li>
<li>the documentation, in the directory &ldquo;doc&rdquo;;</li>
<li>the complete set of tests, and the pseudopotentials needed for the tests, in the directory &ldquo;tests&rdquo;;</li>
<li>all the scripts and information needed to produce makefiles, in other directories, especially &ldquo;config&rdquo;.</li>
</ul>
<p>The package does not contain the object files and the binary executable files.</p>
<p>You can go to the next section, to generate the executable files, if this
worked.</p>
<p>If this did not work, here are more detailed explanations &hellip;</p>
<p>So, execute the following actions:</p>
<ul>
<li>under mac os x, open a terminal session, so you can work as if it were a unix platform.</li>
<li>
<p>transfer the above-mentioned file(s) to your machine, in a directory suitable for the installation of the present version of abinit, and subsequent ones.<br />
you should have about 250 mb of disk space to install the code, maybe more,
depending on the version, and the number of tests that you will do.</p>
</li>
<li>
<p>gunzip (on some machine you need gzip -d) and untar the file &lsquo;<strong>abinit-<em>x.y.z</em>.tar.gz</strong>&rsquo;:<br />
gunzip <strong>abinit-<em>x.y.z</em>.tar.gz</strong> | tar -xvf -</p>
</li>
</ul>
<p>If correctly done, a main directory, denoted ~abinit in the present document
(usually, its real name will be <strong>abinit-<em>x.y.z</em></strong>) and a whole set of
subdirectories should have been created. One of them is called &lsquo;doc/&rsquo;. It
contains many important informations. many of the files it contains are .html
files, that are placed on the web site. However, many other files are not
available in .html format, and are not found on the web site. In the future,
keep in mind that the information that you are looking for (but that you
cannot find on the web site) might be in the subdirectories of doc/, esp.
doc/theory/, doc/users/, doc/psp_infos/.</p>
<p>You might now go to the section 2.</p>
<p>Do not forget: if you want to modify and/or add a new file, please consult the
section 7. for developers: how to modify the code? after reading the present
section.</p>
<hr />
<h2 id="246-how-to-make-the-executables-how-to-compile-the-executables">2. How to make the executables? (=How to compile the executables?)<a class="headerlink" href="#246-how-to-make-the-executables-how-to-compile-the-executables" title="Permanent link">&para;</a></h2>
<p>We now suppose that you have a F90 compiler and you want to compile the source
files.</p>
<p>In most cases, you will have to provide to the &lsquo;make&rsquo; utility some
information: the location of the F90 compiler (and sometimes even the C
compiler) on your machine, the adequate compiler options, and, if you want to
produce the parallel binaries, the location of the MPI library on your
machine.</p>
<p>Although the presently implemented building tools should be powerful enough to
succeed to make the binaries without you giving such information, it has been
seen that on a significant number of platforms, it is still better to give
them. Indeed, you might generate a clearly suboptimal executable, executing
slowly, or with downgraded capabilities.</p>
<p>Supposing that you are in the lucky case where the build system is able to
find all the information, then the build of ABINIT is very simple. Issue:</p>
<ul>
<li>configure or ./configure (or first create a tmp directory, then cd tmp, then ../configure)</li>
<li>make (or make mj4 , or make multi multi_nprocs=n for using &ldquo;n&rdquo; processors on a SMP machine where you have to replace &ldquo;n&rdquo; by its value) </li>
<li>(optionally) make install</li>
</ul>
<p>Well, it might also be that only one additional information is needed, in
which case something like:</p>
<ul>
<li>configure FC=gcc</li>
<li>make </li>
</ul>
<p>might work. In both cases, let&rsquo;s explain a bit what is done, and the further
possibilities.</p>
<p>The &lsquo;configure&rsquo; step produces the set of Makefile files (among other things),
taking into account information about your machine and the hostname.ac file.
It takes three minute long, or less. The &lsquo;make&rsquo; step compiles everything,
according to the Makefile files produced in the prior step. The time to make
everything is highly dependent on the compiler and platform. On a 2.8 GHz
quad-proc machine (using make mj4), the whole compilation is about 5 minutes.
On some other platforms, with only one processor, it might be more than one
hour.</p>
<p>The executables will be located in the subdirectory ~abinit/src/98_main, if
you have chosen to issue ./configure in the ~abinit directory. If you have
issued ./configure in another directory, it will be placed accordingly.</p>
<p>The &lsquo;make&rsquo; command can also be used in many different ways, by mentioning one
or more targets. A (partial) list of targets for users can be obtained by
typing:</p>
<div class="codehilite"><pre><span></span>    make <span class="nb">help</span>
</pre></div>


<p>Additional targets, for developers, can be obtained by typing:</p>
<div class="codehilite"><pre><span></span>    make help_dev
</pre></div>


<p>It is possible to compile only one of the executable, just after the configure
step by typing:</p>
<div class="codehilite"><pre><span></span>    make name_of_the_binary
</pre></div>


<p>(where name_of_the_binary can be abinit, cut3d, anaddb, &hellip;).</p>
<p>These are only a tiny fraction of the things that you can realize thanks to
&lsquo;make&rsquo;. Moreover, there are also &lsquo;Makefile&rsquo; files in most of the
subdirectories of ABINIT, with often their own (partial) list of targets for
users (and also sometimes for developers). To obtain these lists, go to the
directory, and type:</p>
<div class="codehilite"><pre><span></span>    make <span class="nb">help</span>
</pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span>make help_dev
</pre></div>


<p>Finally,</p>
<div class="codehilite"><pre><span></span>make install
</pre></div>


<p>will install abinit in the /usr/local directory.</p>
<p>In case you want to go further, please consult files in ~abinit/doc/build .</p>
<p>Let&rsquo;s come back to the case where the build system needs some more
information. This information should be stored in a file named hostname.ac,
where &ldquo;hostname&rdquo; is the result of executing the command <code>hostname</code> on your
machine, e.g. abiref.pcpm.ucl.ac.be or my_machine &hellip; , and taking the first
word of the returned chain of character, e.g. abiref or my_machine &hellip;</p>
<p>There is a template for such a file, located in ~abinit/doc/config/. Its name
is config-template.ac. Examples of such files, that have been used for testing
the package, can be found in ~abinit/doc/build/config-examples/. By the way,
the known problems observed for these different tests are mentioned in the
~abinit/KNOWN_PROBLEMS file, and the hostname.ac files are correspondingly
indicated at the beginning of this file.</p>
<p>Most of the examples provided in the ~abinit/doc/build/config-examples/
directory contain about five definitions: F90 and C locations, F90 and C
options, MPI library location (or the indication that MPI is not enabled). On
the other hand, there are many other possible control flags (&ldquo;with_XYZ&rdquo;),
needed for advanced use. In case you have trouble with some library (LibXC,
WANNIER90, ETSF_IO &hellip;), you may disable its build.</p>
<p>Your hostname.ac file might be placed in your home directory in a new
directory that you will name ~/.abinit/build/. At that location, everytime you
install a new version of ABINIT, the needed information will be found by
ABINIT, so you do not have to care anymore about this file after the first
installation.</p>
<p>On the other hand, if you need to play with several computers, you can place
the hostname.ac file directory in the ~abinit directory, where such a
hostname.ac file will be also seen by the build system (and preferred over the
one located in ~/.abinit/build/) or in your build directory (like
~abinit/tmp/). As mentioned above, you might even type at the terminal the
definitions contained in the hostname.ac file.</p>
<p>Note the order of precedence for the location of the hostname.ac file (or
command-line information), in case more than one possibility is used,
(decreasing order of precedence):</p>
<ul>
<li>Command line (overcome all other information)</li>
<li>Your build directory (~abinit/tmp/)</li>
<li>The ABINIT top source directory (~abinit/)</li>
<li>~/.abinit/build/</li>
<li>/etc/abinit/build/</li>
</ul>
<p>When the hostname.ac file is ready, you have to issue, in the ~abinit
directory:</p>
<ul>
<li>configure or ./configure (or first create a tmp directory, then cd tmp, create a hostname.ac file, then ../configure)</li>
<li>make or make mj4 (or make multi for using several processors on a SMP machine)</li>
<li>(optionally) make install</li>
</ul>
<hr />
<h2 id="346-how-to-make-the-internal-tests">3. How to make the internal tests?<a class="headerlink" href="#346-how-to-make-the-internal-tests" title="Permanent link">&para;</a></h2>
<p>In case you are running under Unix (Linux or another flavour), the abinit code
has several small internal tests (three basic ones, called &ldquo;fast&rdquo;, &ldquo;v1&rdquo; and
&ldquo;v5&rdquo;, and then one for each of the libraries &ldquo;bigdft&rdquo;, &ldquo;etsf_io&rdquo;, &ldquo;libxc&rdquo;,
&ldquo;wannier90&rdquo;), that can be issued automatically, and that check themselves
whether the results that have been obtained are right or wrong. These tests
are available whether you have got the package from the Web or from the ABINIT
archive. Of course, you need to have compiled abinit in order to run the
internal tests. Moreover, the simple implementation procedure assumes that the
executable is located in ~abinit/src/98_main (the standard location after
issuing &ldquo;make&rdquo;).</p>
<p>You can begin with the test &ldquo;fast&rdquo;. Simply issue the command:</p>
<div class="codehilite"><pre><span></span>**make test_fast**
</pre></div>


<p>It will run during a few seconds. It should print:</p>
<div class="codehilite"><pre><span></span>Status file, reporting on built-in test fast

==&gt; The run finished cleanly.
    Moreover, comparison of the total energy, and other (few) relevant quantities with reference values has been successful.
    This does not mean that no problem is present, however.
    Please run the complete set of ABINIT tests to gain a better confidence in your installation.
</pre></div>


<p>This means that the internal test &ldquo;fast&rdquo; ran successfully. If you do not get
this message, then the executables were not properly generated, or there is a
problem with the makefile that drives the internal test. In this case, after
having tried to solve the problem by yourself, you should contact somebody in
the ABINIT group.</p>
<p>In addition to this small message, you can have access to all generated files,
that are located inside the tests/built-in/Input subdirectory.</p>
<p>Supposing test &ldquo;fast&rdquo; was OK, then you might issue the command:</p>
<div class="codehilite"><pre><span></span>**make tests_in**
</pre></div>


<p>The test &ldquo;fast&rdquo; will be done once more, followed by the other internal tests.
Again, we hope that you will get the positive diagnostics for the other tests.
Of course, the &ldquo;bigdft&rdquo;, &ldquo;etsf_io&rdquo;, &ldquo;libxc&rdquo;, and &ldquo;wannier90&rdquo; needs the
appropriate library to be installed in order to work properly.</p>
<p>For further information on these internal tests, see the ~abinit/tests/built-
in/README file.</p>
<p>You might now read the <a href="../../users/new_user_guide.html">new user&rsquo;s guide</a>, in
order to learn how to use the code, and then to follow the four basic
tutorials, see the <a href="../../tutorial/welcome.html">entry page for the tutorials</a>.
This is useful if you consider that the installation has been successful. Or
you might continue to read the present Web page, and try to perform the speed
tests, as well as the other tests.</p>
<hr />
<h2 id="546-how-to-make-the-other-tests">5. How to make the other tests?<a class="headerlink" href="#546-how-to-make-the-other-tests" title="Permanent link">&para;</a></h2>
<p>Although it is possible to make the other tests without knowing really how to
use the code (since all steps involved - the run and subsequent analysis - are
done automatically), for the other tests, it is recommended to read the <a href="../../users/new_user_guide.html">new
user&rsquo;s guide</a>, and then to follow the four basic
tutorials, see the <a href="../../tutorial/welcome.html">entry page for the tutorials</a>.</p>
<p>Let us pursue with the testing procedure. Go to the ~abinit/tests directory,
and issue:</p>
<div class="codehilite"><pre><span></span>**make help**
</pre></div>


<p>The workhorse script to run the tests is called runtests.py . It is very
flexible. A reasonable set of tests (those contained in the fast and v&rdquo;x&rdquo;
directories), can be run automatically by:</p>
<div class="codehilite"><pre><span></span>**./runtests.py **
</pre></div>


<p>or e.g.</p>
<div class="codehilite"><pre><span></span>**./runtests.py -j4**
</pre></div>


<p>(if you have 4 cores on your computer)</p>
<p>This is the recommended procedure for developers. In order to execute these
tests, you will need a larger disk space than for the simple installation of
the code (the total additional disk space required is on the order of 1GB).</p>
<p>The video below gives an overwiew of the command line options of <code>runtests.py</code></p>
<p><a href="https://asciinema.org/a/40324"><img alt="asciicast" src="https://asciinema.org/a/40324.png" /></a></p>
<p>Let us now examine the different subdirectories.</p>
<p>~ABINIT/tests/fast/ is the simplest, and its content will be described in some
detail below. For tests of the parallel version see the directory
tests/paral/, as well as the ~abinit/doc/users/paral_use text file. For tests
of the response function features of abinit, and for tests of mrgddb and
anaddb, see the subdirectories tests/v2. The other directories tests/v3,
tests/v4, &hellip; presents further tests of recently implemented features of
ABINIT.</p>
<p><strong>1) tests/fast/</strong> (for the sequential version only)</p>
<p>This subdirectory contains a basic set of tests of the code, aimed at testing
whether the code is coherent in time (successive versions), and exercising
several parts of the code. However, they do not examine its accuracy on
physical problems, mainly because the number of plane waves used is too small,
and some tests are not run to self-consistent convergence. 32 MB of memory
should be enough for these tests.</p>
<p>The input files for each of the tests can be found in the
~abinit/tests/fast/Input directory. At the bottom of the each of the input
file, some metadata is present. Such metadata mentions the executable to be
used (automatically), possibly the other input files (like pseudopotentials),
the output files to be analyzed, the admitted tolerances with respect to
reference output files, the author of the test, and a brief description of the
test.</p>
<p>To run only the tests in this directory, simply issue, in the ~abinit/tests/
directory:</p>
<div class="codehilite"><pre><span></span>**./runtests.py fast**
</pre></div>


<p>It will create a directory named Test_suite. All the results will be in that
directory. The output files will be automatically compared, thanks to a &lsquo;diff&rsquo;
command, to a set of reference files (in ~abinit/tests/fast/Refs/). The
corresponding difference files are prefixed by &lsquo;diff.&rsquo;.</p>
<p>In addition to &lsquo;diff&rsquo;, there are two other levels of automatic analysis: one
based on a comparing tool called &lsquo;fldiff&rsquo;, producing &lsquo;fldiff.report&rsquo; files,
and another where the output of &lsquo;fldiff&rsquo; is further analyzed, and produce a
brief report called &lsquo;report&rsquo;. The latter step is only performed in case all
the tests cases of one directory are performed (including the case where tests
of different directories are performed)</p>
<p>The one-line summaries produced by fldiff (see later) are compared with the
tolerances indicated in the input file (metadata added at the end of the input
file). This procedure produces a file called &ldquo;report&rdquo;, in which there is a one
line assessment of the behaviour of each test: succeeded (everything is OK),
passed (the test is OK for users in production), passed marginally (the test
is within 1.5 of the usually accepted deviation, which is likely OK for most
applications - still to be improved by the development team, though), failed
(there is a problem, the deviation is usually not accepted). This is by far
the most convenient tool to analyze the automatic tests of abinit.</p>
<p>The vast majority of tests cases succeed or pass on all platforms that are
used by the developer team in Louvain-la-neuve. Some problems are mentioned in
the file ~abinit/KNOWN_PROBLEMS , Additionally, there might be specific
problems for some test case for some platforms, also mentioned in
~abinit/KNOWN_PROBLEMS. So, apart of the known problems, mentioned in this
file, the &ldquo;report&rdquo; file should mention, for each test case, only &ldquo;succeeded&rdquo;
or &ldquo;passed&rdquo;.</p>
<p>The comparing tool &lsquo;fldiff&rsquo; -for &lsquo;floating diff&rsquo;- performs in a more detailed
way the comparison of floating numbers between the output files and the
reference files than in the case of a &lsquo;diff&rsquo; command. As used presently, for
each run inside one directory, one single file, called &lsquo;fldiff.report&rsquo;, will
be produced, and gather the analysis for all tests in that directory.</p>
<p>If for one test case, the two files differ by the number of lines, the
&lsquo;fldiff.report&rsquo; file will report that it cannot compare the two files. Usually
this problem will be seen at the level of &lsquo;command signs&rsquo; appearing sometimes
in the first column of the output files, so a typical error message
(announcing something went wrong) will be:</p>
<div class="codehilite"><pre><span></span>Case_1
22
The diff analysis cannot be pursued: the command sign differ.
</pre></div>


<p>By contrast, it will identify the floating numbers and ignore their
differences if they are within some prescribed tolerance, or if the difference
is not relevant. For example, it is able to ignore the differences in timings.
If everything goes fine for a test, fldiff should identify only the
differences in:</p>
<ul>
<li>the dates of execution (possibly);</li>
<li>the version numbers (possibly);</li>
<li>the platform description (possibly);</li>
<li>the overall execution time (this is ALWAYS printed, even without differences).</li>
</ul>
<p>So, a successful execution of one test case may be announced as follows in the
fldiff.report file:</p>
<div class="codehilite"><pre><span></span>Case_1
2
&lt;  Version 8.0.6  of ABINIT
&gt;  Version 8.0.3  of ABINIT
5
&lt;  Starting date: Mon 23 May 2016.
&gt;  Starting date: Mon  4 Apr 2016
202
&lt; +overall time at end (sec): cpu=          7.1  wall=          8.0
&gt; +Overall time at end (sec): cpu=          7.3  wall=          8.0
Summary Case_1: no significant difference has been found
</pre></div>


<p>The fldiff.report file will have one such section for each test_case that was
run. It begins with the number of the test case, then includes a few blocks of
three lines: the number of the line where something is happening, followed by
the content of the two lines. Finally, there is a one-line summary for each
test case.</p>
<p>More information on the fldiff script can be found in the
~abinit/tests/Scripts/fldiff.pl file.</p>
<p><strong>2) tests/v1</strong></p>
<p>This directory contains tests built in the same spirit as those in the
test/fast directory, but that exercise other basic features, like the
treatment of metals, the GGA, the new pseudopotentials, the multi-dataset
mode, the cell parameters optimization, and the spatial symmetry groups
database. These were developed during the development time of the version 1 of
ABINIT. Of course, the automatic difference procedure only compares to recent
runs of the ABINIT code. As for the &lsquo;fast&rsquo; test cases, the fldiff.report and
report files are also available. 64 MB of memory should be enough for these
tests.</p>
<p><strong>3) tests/v2</strong></p>
<p>This directory contains tests built in the same spirit as those in the
tests/fast/ or tests/v1 directory, but that exercise features not present in
version 1 of the ABINIT package, mainly the response function features, and
the use of the mrgddb and anaddb codes. Again, the automatic difference
procedure only compares to recent runs of the ABINIT code. As for the &lsquo;fast&rsquo;
test cases, the fldiff.report and report files are also available. 64 MB of
memory should be enough for these tests.</p>
<p><strong>4) tests/v3, tests/v4, tests/v5, tests/v6, tests/v67mbpt, tests/v7, tests/v8, tests/bigdft, tests/etsf_io, tests/libxc, tests/wannier90</strong></p>
<p>These directories contain tests built in the same spirit as those in the
tests/fast/ directory, but that exercise features not present in the
Plane_Wave code, nor in version 1 or 2 of the ABINIT package, noticeably the
use of the GW code, the utilities Cut3d, AIM, .., the PAW &hellip; . Or the
interfacing with fallbacks. Again, the automatic difference procedure only
compares to recent runs of the ABINIT code. As for the &lsquo;fast&rsquo; test cases, the
fldiff.report and report files are also available. 64 MB of memory should be
enough for these tests.</p>
<p><strong>5) tests/paral/ and tests/mpiio/</strong> (need MPI support)</p>
<p>This directory contains tests built in the same spirit as those in the
test/fast/ directory, but that exercise the parallel version of the ABINIT
code.</p>
<p>The script runtests.py considers one of the different input files, and for
this file, it will use the parallel code with one processing node, then
perform different parallel runs with an increasing number of processing nodes,
as specified in the metadata contained in the input file. As for the other
series of test, the diff and the fldiff utilities are used automatically, and
fldiff.report and report files are produced automatically.</p>
<p><strong>6) tests/cpu </strong> (for the sequential version only)</p>
<p>This subdirectory contains the scripts, and input files needed for testing the
cpu time, either on progressively finer real space grids, or on progressively
bigger unit cells. Please read the README file of this directory. Also for
this suite of tests is activated with:</p>
<div class="codehilite"><pre><span></span>**make tests_cpu**
</pre></div>


<p>Unlike in the previous case, many directories will be created (more than 10 in
the present version). Their name begins with the test name (A1, A2, A3, A4,
B1, B2, B3, B4, C3, D3), and is followed by the machine name and the date.
Inside these directories, many runs are done. There is a &lsquo;report&rsquo; file that
summarizes the timing of the different runs, and there is a &lsquo;diff&rsquo; file, that
compares these timings with the reference (output files from a PIV at 2.8 MHz,
usually).</p>
<p>The structure of these tests is more complex than that of the test/fast/ and
test/v1/ directories. The tools used are the &lsquo;serie&rsquo; scripts (serieA,serieB,
serieC and serieD) as well as the &lsquo;getrep&rsquo; script. For an explanation, contact
the ABINIT group. For the largest tests (B and D series), up to 200MB of
central memory are required.</p>
<hr />
<h2 id="646-things-that-are-not-in-the-installation-packages">6. Things that are NOT in the installation packages.<a class="headerlink" href="#646-things-that-are-not-in-the-installation-packages" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><strong>Many pseudopotentials are not in the installation package:</strong><br />
The package contain several dozen pseudopotentials, for testing purposes, see
~abinit/tests/Psps_for_tests/. However, the largest set of pseudopotentials
and PAW atomic datafiles can be found on the <a href="http://www.abinit.org/downloads/atomic-data-files">Atomic data files ABINIT Web
page</a>. Other
pseudopotentials have been generated by many different users, and might be
shared, but you might have to contact them.</p>
</li>
<li>
<p>The &ldquo;fallbacks&rdquo; are <strong>not</strong> in the installation package. They are downloaded from the Web automatically at configure time. If you do not have the command &ldquo;wget&rdquo; install on your machine, or if you do not have an access to the internet, you should disable all the fallbacks. </p>
</li>
<li>The Web site <a href="http://www.abinit.org">http://www.abinit.org</a> contains many other things, including links to the forum, the mailing list, the ABINIT events, &hellip;  </li>
</ul>
<hr />
<h2 id="746-for-developers-how-to-modify-the-code">7. For developers: how to modify the code?<a class="headerlink" href="#746-for-developers-how-to-modify-the-code" title="Permanent link">&para;</a></h2>
<h3 id="71-to-modify-a-file-arguments-unchanged">7.1. To modify a file (arguments unchanged).<a class="headerlink" href="#71-to-modify-a-file-arguments-unchanged" title="Permanent link">&para;</a></h3>
<p>If you want simply to modify the content of an existing file (e.g. one of the
Fortran files, located in one of the src/* directories), without changing its
list of arguments, and recompile the code, the procedure is quite simple.
Modify that file, and reissue:</p>
<div class="codehilite"><pre><span></span>**make**
</pre></div>


<p>in ~abinit.</p>
<h3 id="72-to-modify-a-file-arguments-changed">7.2. To modify a file (arguments changed).<a class="headerlink" href="#72-to-modify-a-file-arguments-changed" title="Permanent link">&para;</a></h3>
<p>If you want to modify the content of an existing Fortran file as well as the
list of arguments, and recompile the code, the procedure is to modify that
file, and then issue, in the ~abinit directory:</p>
<div class="codehilite"><pre><span></span>***/abilint . .**  
**make**
</pre></div>


<p>Do not forget the two dots in the abilint command.</p>
<h3 id="73-to-add-a-fortran-file">7.3. To add a Fortran file.<a class="headerlink" href="#73-to-add-a-fortran-file" title="Permanent link">&para;</a></h3>
<p>If you want to add a new Fortran file, there is a difference whether you work
with or without the autotools.</p>
<p>In both cases, you must <strong>add the file name in the abinit.src file of the
corresponding directory</strong>. As an example, suppose that you want to add a new
routine named <strong>blork.F90</strong> in the directory ~abinit/src/65_nonlocal/. Then,
you must also declare it in the ~abinit/src/65_nonlocal/abinit.src file.</p>
<p>Note that the choice of directory is important. You should choose to put your
new routine in a directory that has a prefix number (e.g. 42 for 42_nlstrain)
higher than all the directories that contain routines you will use (except if
the called routines are in the same directory), and smaller than all the
directories that call your routine (except for routines that are in the same
directory as yours).</p>
<p>If you work with the autotools, you have now to reissue:</p>
<div class="codehilite"><pre><span></span>***/*/makemake**
**./configure**
**make**
</pre></div>


<p>(see the section 2).</p>
<p>If you work without the autotools, <strong>you must also modify by hand</strong> (i.e. find
the places where the Fortran files are listed, and complete the list) the
Makefile.in of the directory where the new file has been added (e.g.
~abinit/src/65_nonlocal/Makefile.in).</p>
<p>Then issue:</p>
<div class="codehilite"><pre><span></span>***/abilint . . **
**make**
</pre></div>


<p>in ~abinit/.</p>
<h3 id="74-to-generate-the-source-package">7.4. To generate the source package.<a class="headerlink" href="#74-to-generate-the-source-package" title="Permanent link">&para;</a></h3>
<p>If you want to produce the source package abinit-<em>x.y.z</em>.tar.gz, type:</p>
<div class="codehilite"><pre><span></span>**make dist**
</pre></div>


<p>in ~abinit/.</p>
<p>Do not forget to change its name (e.g. add your name after <em><strong>x.y.z</strong></em>, to
identify that this is a modified version of ABINIT).</p></div>
        </div>

        <footer class="col-md-12">
<hr>

    <center>Abinit version 8.5.4</center>


    <center>Copyright &copy; 2017 The Abinit Group</center>


<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

      <!--
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="../extra_javascript/github_edit.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    -->

    </body>
</html>
